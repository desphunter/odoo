<odoo>
  <data>
      <!-- decorproject stage -->


<!--        view project in search panel in front page-->
      <record id="view_decorproject_filter" model="ir.ui.view">
          <field name="name">saaspms.decorproject.search</field>
          <field name="model">saaspms.decorproject</field>
          <field name="arch" type="xml">
              <search string="装修项目">
                  <field name="name" string="装修项目"/>
                  <field name="stage_id"/>
                  <separator/>
                  <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
                  <group expand="0" string="Group By">
                      <filter name="group_city" string="城市" domain="[]" context="{'group_by': 'city_id'}"/>
                  </group>
                  <searchpanel>
                      <field name="city_id" icon="fa-building"/>
                  </searchpanel>
              </search>
          </field>
      </record>


      <!-- decorproject -->
      <record model="ir.ui.view" id="view_pms_decorproject">
          <field name="name">saaspms.pms_decorproject.list</field>
          <field name="model">saaspms.decorproject</field>
          <field name="arch" type="xml">
              <tree string="装修项目">
                  <field name="id" string="ID"/>
                  <field name="name" string="名称"/>
                  <field name="active" string="生效"/>
                  <field name="date_start" string="起始日期"/>
                  <field name="date_required" string="完成日期"/>
                  <field name="pretask_count" string="预填任务数"/>
              </tree>
          </field>
      </record>

      <record id="edit_decorproject" model="ir.ui.view">
          <field name="name">saaspms.pms_decorproject.form</field>
          <field name="model">saaspms.decorproject</field>
          <field name="arch" type="xml">
              <form string="装修项目">
                  <header>
                      <button string="生成计划任务基础" name="trans_pretoschedule_tasks" type="object"
                              class="btn-primary o_create_schedule_tasks"
                              attrs="{'invisible' : [('stage_id', '!=', 2)]}"/>
                      <button string="显示计划任务" name="open_decorscheduletasks" type="object"
                              class="btn-primary o_open_scheduletasks"
                              attrs="{'invisible' : [('stage_id', '!=', 2)]}"/>
                      <button string="自动排期" name="automake_schedule" type="object" class="btn-primary o_maek_schedulet"
                              attrs="{'invisible' : [('stage_id', '!=', 2)]}"/>
                      <field name="stage_id" widget="statusbar" options="{'clickable': '1', 'fold_field': 'fold'}"/>
                  </header>
                  <sheet string="装修项目">
                      <div class="oe_button_box" name="button_box">
                          <button class="oe_stat_button" type="action"
                                  name="%(saas-pms.view_decorproject_decorpretasks_all)d" icon="fa-tasks">
                              <field string="预填任务" name="pretask_count" widget="statinfo"/>
                          </button>
                      </div>
                      <div class="oe_title">
                          <h1>
                              <field name="name" placeholder="Project Name" string="名称"/>
                          </h1>
                      </div>
                      <notebook>
                          <page name="settings" string="参数配置">
                              <group>
                                  <field name="active" invisibe="1" string="生效"/>
                                  <field name="date_start" string="起始日期"/>
                                  <field name="date_required" string="完成日期"/>
                              </group>
                              <group>
                                  <field name="city_id" string="城市"/>
                                  <field name="decor_address" string="实施地址"/>
                                  <field name="color" string="色标"/>
                              </group>
                          </page>
                      </notebook>
                  </sheet>
              </form>
          </field>
      </record>


        <!--      project kanban view -->
<!--      <record model="ir.ui.view" id="view_decorproject_kanban">-->
<!--          <field name="name">saaspms.decorproject.kanban</field>-->
<!--          <field name="model">saaspms.decorproject</field>-->
<!--          <field name="arch" type="xml">-->
<!--              <kanban>-->
<!--                  <field name="name"/>-->
<!--                  <field name="color"/>-->
<!--&lt;!&ndash;                  <field name="pretask_count" string="派工单数"/>&ndash;&gt;-->
<!--&lt;!&ndash;                  <field name="scheduletask_count" string="计划工程任务数"/>&ndash;&gt;-->
<!--                  <templates>-->
<!--                      <t t-name="kanban-box">-->
<!--                          <div class="oe_kanban_global_click">-->
<!--                              <div class="oe_kanban_content">-->
<!--                                  <div class="oe_kanban_card">-->
<!--                                      <span><t t-esc="record.name.value"/></span>-->
<!--                                  </div>-->
<!--                              </div>-->
<!--                          </div>-->
<!--                      </t>-->
<!--                  </templates>-->
<!--              </kanban>-->
<!--          </field>-->
<!--      </record>-->


      <record id="view_decorproject_kanban" model="ir.ui.view">
          <field name="name">saaspms.decorproject.kanban</field>
          <field name="model">saaspms.decorproject</field>
          <field name="arch" type="xml">
              <kanban>
                  <field name="id"/>
                  <field name="name"/>
                  <field name="color"/>
                  <field name="date_start"/>
                  <field name="date_required"/>
                  <field name="pretask_count"/>
                  <templates>
                      <t t-name="kanban-box">
                          <div t-attf-class="#{kanban_color(record.color.raw_value)} oe_kanban_global_click o_has_icon">
                              <div class="oe_kanban_details">
                                  <t class="o_kanban_record_title">
                                      <strong t-esc="record.name.value"/>
                                  </t>
                                  <div t-if="record.date_start.value">
                                      <t t-esc="record.date_start.value"/>
                                  </div>
                                  <div t-if="record.date_required.value">
                                      <t t-esc="record.date_required.value"/>
                                  </div>
                              </div>
                              <div class="o_project_kanban_boxes">
                                  <a class="o_project_kanban_box"
                                     name="%(saas-pms.view_decorproject_decorpretasks_all)d" type="action">
                                      <div>
                                          <span class="o_value"><t t-esc="record.pretask_count.value"/>预填单数</span>
                                      </div>
                                  </a>
                              </div>
                          </div>
                      </t>
                  </templates>
              </kanban>
          </field>
      </record>

      <!-- server action to the one above -->
<!--
    <record model="ir.actions.server" id="saas-pms.action_server">
      <field name="name">saas-pms server</field>
      <field name="model_id" ref="model_saas-pms_saas-pms"/>
      <field name="state">code</field>
      <field name="code">
        action = {
          "type": "ir.actions.act_window",
          "view_mode": "tree,form",
          "res_model": model._name,
        }
      </field>
    </record>
-->

<!--    <record id="ir_actions_server_project_sample" model="ir.actions.server">-->
<!--      <field name="name">Project: Activate Sample Project</field>-->
<!--      <field name="model_id" ref="project.model_project_project"/>-->
<!--      <field name="state">code</field>-->
<!--      <field name="code">action = model.activate_sample_project()</field>-->
<!--    </record>-->

  </data>
</odoo>